# P4V AI Assistant 사용 매뉴얼

## 버전 히스토리

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.4.0 | 2025-01-15 | Submitted, History 뷰에서도 컨텍스트 메뉴 지원 |
| 0.3.0 | 2025-01-10 | 최초 배포 |

---

## 목차
1. [설치하기](#1-설치하기)
2. [AI Description 생성](#2-ai-description-생성)
3. [AI 코드 리뷰](#3-ai-코드-리뷰)
4. [HTML 리포트](#4-html-리포트)
5. [설정](#5-설정)
6. [문제 해결](#6-문제-해결)

---

## 1. 설치하기

### 1.1 설치 파일 실행

`P4V-AI-Assistant-Setup.exe`를 실행합니다.

[스샷#1 - 설치 시작 화면 (Welcome)]

### 1.2 라이선스 동의

라이선스 내용을 확인하고 **I Agree** 버튼을 클릭합니다.

[스샷#2 - 라이선스 동의 화면]

### 1.3 설치 경로 선택

설치 경로를 선택합니다. 기본 경로(`C:\Program Files\P4V-AI-Assistant`)를 권장합니다.

[스샷#3 - 설치 경로 선택 화면]

### 1.4 Webhook URL 설정

n8n Webhook URL을 입력합니다. 기본값이 이미 입력되어 있으므로 특별한 경우가 아니면 그대로 **Next**를 클릭합니다.

[스샷#4 - Webhook URL 입력 화면]

> **참고**: Webhook URL은 설치 후 설정 화면에서 언제든지 변경할 수 있습니다.

### 1.5 설치 완료

설치가 완료되면 **Finish** 버튼을 클릭하고, **P4V를 재시작**합니다.

[스샷#5 - 설치 완료 화면]

### 1.6 메뉴 확인

P4V 재시작 후 상단 **Tools** 메뉴에서 다음 항목들이 추가된 것을 확인합니다:
- AI Description 생성
- AI 코드 리뷰
- AI Assistant 설정

[스샷#6 - P4V Tools 메뉴]

---

## 2. AI Description 생성

Changelist의 변경 내용을 AI가 분석하여 자동으로 Description을 생성합니다.

### 2.1 Changelist 선택

P4V에서 Pending 또는 Submitted Changelist를 **우클릭**합니다.

[스샷#7 - Changelist 우클릭]

### 2.2 AI Description 생성 실행

컨텍스트 메뉴에서 **AI Description 생성**을 클릭합니다.

[스샷#8 - 컨텍스트 메뉴에서 AI Description 생성 선택]

### 2.3 생성 진행

AI가 코드 변경사항을 분석합니다. 진행 상황이 화면에 표시됩니다.

[스샷#9 - Description 생성 진행 화면 (진행바와 상태 메시지)]

### 2.4 결과 확인

생성이 완료되면 결과 화면이 표시됩니다.

[스샷#10 - Description 생성 결과 화면]

#### 버튼 설명

| 버튼 | 기능 |
|------|------|
| **복사하기** | 생성된 Description을 클립보드에 복사합니다 |
| **적용하기** | Pending Changelist의 Description에 직접 적용합니다 |
| **닫기** | 창을 닫습니다 |

> **참고**: **적용하기**는 Pending Changelist에만 동작합니다. Submitted Changelist는 **복사하기**로 내용을 복사하여 사용하세요.

---

## 3. AI 코드 리뷰

Changelist의 코드를 AI가 분석하여 버그, 보안 취약점, 성능 이슈 등을 검토합니다.

### 3.1 코드 리뷰 실행

Changelist를 **우클릭**하고 **AI 코드 리뷰**를 클릭합니다.

[스샷#11 - AI 코드 리뷰 메뉴 선택]

### 3.2 리뷰 진행

AI가 코드를 분석합니다. 파일이 많은 경우 여러 배치로 나누어 처리되며, 진행 상황이 표시됩니다.

[스샷#12 - 코드 리뷰 진행 화면 (배치 처리 상태 메시지)]

### 3.3 리뷰 결과 확인

리뷰가 완료되면 결과 화면이 표시됩니다.

[스샷#13 - 코드 리뷰 결과 화면 전체]

#### 결과 화면 구성

**① 점수**
- 100점 만점으로 코드 품질 점수가 표시됩니다
- 70점 이상: 초록색, 50점 이상: 주황색, 50점 미만: 빨간색

**② 통계**
- Critical, Warning, Info, Suggestion 개수가 표시됩니다

**③ 요약**
- AI가 작성한 전체 리뷰 요약입니다

**④ 상세 리뷰 목록**
- 심각도, 파일명, 라인 번호, 메시지가 테이블로 표시됩니다
- 항목을 클릭하면 하단에 상세 정보가 표시됩니다

[스샷#14 - 상세 리뷰 항목 선택 시 상세 정보 표시]

**⑤ 상세 정보**
- 선택한 코멘트의 전체 내용과 제안사항이 표시됩니다

#### 심각도 구분

| 심각도 | 설명 |
|--------|------|
| **CRITICAL** | 즉시 수정이 필요한 심각한 버그 또는 보안 취약점 |
| **WARNING** | 수정을 권장하는 잠재적 문제 |
| **INFO** | 참고할 만한 정보 |
| **SUGGESTION** | 코드 개선 제안 |

### 3.4 HTML 리포트

더 자세한 리뷰 결과를 보려면 하단 버튼을 사용합니다.

| 버튼 | 기능 |
|------|------|
| **HTML로 보기** | 브라우저에서 상세 리포트를 엽니다 |
| **HTML로 내보내기** | HTML 파일로 저장합니다 |
| **닫기** | 창을 닫습니다 |

---

## 4. HTML 리포트

브라우저에서 열리는 HTML 리포트는 Side-by-side diff 뷰와 AI 코멘트를 함께 제공합니다.

### 4.1 리포트 구성

[스샷#15 - HTML 리포트 전체 화면]

#### 헤더 영역
- Changelist 번호, 점수, 심각도별 통계가 표시됩니다

#### 탭 영역
- **요약**: 전체 요약과 코멘트 목록
- **파일별 탭**: 각 파일의 diff와 AI 코멘트

### 4.2 요약 탭

[스샷#16 - 요약 탭 화면]

- 전체 리뷰 요약 내용
- 모든 코멘트 목록 (클릭하면 해당 파일로 이동)

### 4.3 파일별 diff 뷰

[스샷#17 - 파일별 탭 - Side-by-side diff 뷰]

- **Side-by-Side**: 변경 전/후 코드를 좌우로 비교
- AI 코멘트가 해당 라인에 인라인으로 표시됩니다

### 4.4 변경사항만 / 전체 소스 토글

[스샷#18 - 변경사항만/전체소스 토글 버튼]

| 모드 | 설명 |
|------|------|
| **변경사항만** | 변경된 라인 주변 컨텍스트만 표시 (기본값) |
| **전체 소스** | 파일 전체 내용을 표시 |

### 4.5 AI 코멘트 인라인 표시

[스샷#19 - AI 코멘트 인라인 표시 (심각도별 색상)]

- AI 코멘트가 해당 코드 라인 아래에 직접 표시됩니다
- 심각도에 따라 색상이 다르게 표시됩니다

---

## 5. 설정

### 5.1 설정 화면 열기

다음 두 가지 방법으로 설정 화면을 열 수 있습니다:
- P4V 메뉴: **Tools > AI Assistant 설정**
- 시작 메뉴: **P4V AI Assistant > Settings**

[스샷#20 - 설정 화면 전체]

### 5.2 기본 설정

[스샷#21 - 기본 설정 영역]

| 항목 | 설명 |
|------|------|
| **Webhook URL** | n8n AI 서비스 URL |
| **Timeout (초)** | AI 응답 대기 시간 (기본값: 60초) |

### 5.3 전문가 설정

#### 프로필 선택

[스샷#22 - 전문가 프로필 드롭다운]

| 프로필 | 설명 |
|--------|------|
| **범용 전문가** | 일반적인 코드 리뷰 (기본값) |
| **Unity 2021.3 전문가** | Unity/C# 특화 리뷰 (MonoBehaviour, GC 최적화 등) |
| **Unreal 5.7 전문가** | Unreal/C++ 특화 리뷰 (UObject, 메모리 관리 등) |

#### 프롬프트 커스터마이징

[스샷#23 - Description 프롬프트 / Review 프롬프트 탭]

- **Description 프롬프트**: AI Description 생성 시 사용되는 프롬프트
- **Review 프롬프트**: AI 코드 리뷰 시 사용되는 프롬프트

프롬프트를 직접 수정하여 AI의 동작을 커스터마이징할 수 있습니다.

#### 기본값 복원

**기본값 복원** 버튼을 클릭하면 현재 탭의 프롬프트가 선택된 프로필의 기본값으로 복원됩니다.

### 5.4 설정 저장

**저장** 버튼을 클릭하면 설정이 저장됩니다.

---

## 6. 문제 해결

### 6.1 Tools 메뉴에 항목이 보이지 않는 경우

1. P4V를 완전히 종료합니다
2. 시작 메뉴에서 **P4V AI Assistant > Settings**를 실행합니다
3. 설정 창이 정상적으로 열리는지 확인합니다
4. P4V를 다시 시작합니다

### 6.2 "AI 서비스 오류" 메시지가 나타나는 경우

- 설정에서 **Webhook URL**이 올바르게 입력되어 있는지 확인합니다
- 네트워크 연결 상태를 확인합니다
- 방화벽이 연결을 차단하고 있지 않은지 확인합니다
- **Timeout** 값을 늘려봅니다 (대용량 Changelist의 경우)

### 6.3 "Perforce 오류" 메시지가 나타나는 경우

- P4V에 정상적으로 로그인되어 있는지 확인합니다
- 해당 Changelist에 접근 권한이 있는지 확인합니다

### 6.4 설치 시 "customtools.xml 파싱 실패" 오류

기존 customtools.xml 파일이 손상되었거나 비어있는 경우 발생합니다.
최신 버전(0.3.0 이상)에서는 자동으로 파일을 재생성합니다.

### 6.5 제거하기

- **Windows 설정 > 앱 > P4V AI Assistant > 제거**
- 또는 설치 폴더의 `uninstall.exe` 실행

> **참고**: 제거 시 사용자 설정 파일(`%APPDATA%\P4V-AI-Assistant\config.json`)은 보존됩니다.

---

## 문의

문제가 지속되면 담당자에게 문의해 주세요.
